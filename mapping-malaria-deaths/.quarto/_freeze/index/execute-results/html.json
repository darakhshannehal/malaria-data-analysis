{
  "hash": "6b50e6546e57d76d0100ea99d86cd7d7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Mapping Malaria\"\nformat: dashboard\neditor: visual\ntheme: Cosmo\ncss: styles.css\n---\n\n::: {.cell}\n\n:::\n\n\n\n# Global\n\n## Column {.tabset}\n\n### Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=768}\n:::\n:::\n\n\n\n### Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create map of malaria deaths for all ages across the world and time\nmalaria_deaths_map %>%\n  ggplot() +\n  geom_sf(\n    aes(fill = deaths), # Map deaths to fill color\n    colour = \"royalblue4\", # Set border color\n    linewidth = 0.45 # Set border width\n  ) +\n  scale_fill_gradientn(colors = custom_palette(30)) + # Use custom color palette\n  coord_sf(expand = FALSE) + # Remove extra space around map\n  labs(\n    title = \"Global Malaria Deaths (1990-2016)\", # Set map title\n    fill = \"Deaths (per 100,000 people)\" # Set legend title\n  ) +\n  guides(fill = guide_colorbar(\n    barwidth = unit(0.7, \"lines\"), # Adjust legend width\n    barheight = unit(8, \"lines\") # Adjust legend height\n  )) +\n  theme(\n    plot.title = element_text(margin = margin(b = 15))\n  ) # Add margin below title\n```\n:::\n\n\n\n# Africa\n\n## Column {.tabset}\n\n### Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.gif)\n:::\n:::\n\n\n\n### Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nafrica_deaths_data %>%\n  ggplot() +\n  geom_sf(aes(fill = deaths),\n    colour = \"royalblue4\",\n    linewidth = 0.45\n  ) +\n  scale_fill_gradientn(colors = custom_palette(230)) +\n  coord_sf(expand = FALSE) +\n  guides(fill = guide_colorbar(\n    barwidth = unit(0.7, \"lines\"),\n    barheight = unit(8, \"lines\")\n  )) +\n  theme(\n    plot.title = element_text(margin = margin(b = 15))\n  )\n\nanimated_plot2 <- plot2 +\n  transition_manual(year) + # Animate by year\n  labs(\n    title = \"Malaria Deaths in Africa (**{current_frame}**)\", # Set dynamic title\n    fill = \"Deaths (per 100,000 people)\" # Set legend title\n  ) +\n  theme(\n    plot.title = element_markdown() # Use markdown for dynamic title\n  )\n\n# Save the animation as a GIF\nanim_save(\n  \"africa_malaria_animation.gif\",\n  animation = animated_plot2,\n  width = 6,\n  height = 8,\n  units = \"in\",\n  res = 300,\n  nframes = length(unique(africa_deaths_data$year)), # Set number of frames\n  fps = 10, # Set frames per second\n  renderer = magick_renderer(loop = FALSE) # Use magick renderer\n)\n```\n:::\n\n\n\n# Asia\n\n## Column {.tabset}\n\n### Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.gif)\n:::\n:::\n\n\n\n### Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nasia_deaths_data %>%\n  ggplot() +\n  geom_sf(aes(fill = deaths),\n    colour = \"royalblue4\",\n    linewidth = 0.45\n  ) +\n  scale_fill_gradientn(colors = custom_palette(30)) +\n  coord_sf(expand = FALSE) +\n  guides(fill = guide_colorbar(\n    barwidth = unit(0.7, \"lines\"),\n    barheight = unit(8, \"lines\")\n  )) +\n  theme(\n    plot.title = element_text(margin = margin(b = 15))\n  )\n\nanimated_plot3 <- plot3 +\n  transition_manual(year) +\n  labs(\n    title = \"Malaria Deaths in Asia (**{current_frame}**)\",\n    fill = \"Deaths (per 100,000 people)\"\n  ) +\n  theme(\n    plot.title = element_markdown()\n  )\n\n# Save the animation as a GIF\nanim_save(\"asia_malaria_animation.gif\",\n  animation = animated_plot3,\n  width = 6,\n  height = 8,\n  units = \"in\",\n  res = 300,\n  nframes = length(unique(asia_deaths_data$year)),\n  fps = 10,\n  renderer = magick_renderer(loop = FALSE)\n)\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}